<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scacchiera del Tempo - La Tua Strategia per una Vita da Dio | Scacchi Mentali</title>
  <!-- Stripe.js -->
  <script src="https://js.stripe.com/v3/"></script>
  <style>
    :root {
      --color-accent: #fbbf24;
      --color-accent-dark: #f59e0b;
      --color-danger: #ef4444;
      --color-bg-1: #1e293b;
      --color-bg-2: #0f172a;
      --color-bg-3: #000000;
      --color-text: #ffffff;
      --color-muted: #9ca3af;
      --color-highlight: #fca5a5;
      --glass-border: rgba(255,255,255,0.15);
      --glass-bg: rgba(255,255,255,0.08);
      --glass-shadow: 0 20px 40px rgba(0,0,0,0.4);
      --glass-shadow-hover: 0 25px 50px rgba(0,0,0,0.6);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--color-bg-1) 0%, var(--color-bg-2) 50%, var(--color-bg-3) 100%);
      background-attachment: fixed;
      color: var(--color-text);
      line-height: 1.6;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    
    /* Animated background particles */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(251,191,36,0.03), transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(251,191,36,0.03), transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(251,191,36,0.02), transparent 50%);
      animation: float 20s ease-in-out infinite;
      pointer-events: none;
      z-index: -1;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-10px) rotate(1deg); }
      66% { transform: translateY(5px) rotate(-1deg); }
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header with glassmorphism */
    .header {
      padding: 20px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(20px);
      background: rgba(30,41,59,0.8);
      transition: all 0.3s ease;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: clamp(20px, 4vw, 24px);
      font-weight: bold;
      color: var(--color-accent);
      transition: transform 0.3s ease;
    }
    
    .logo:hover {
      transform: scale(1.05);
    }
    
    .badge {
      background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dark));
      color: #000;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 700;
      box-shadow: 0 4px 15px rgba(251,191,36,0.3);
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 4px 15px rgba(251,191,36,0.3); }
      50% { box-shadow: 0 6px 25px rgba(251,191,36,0.5); }
    }
    
    /* Hero Section with advanced effects */
    .hero {
      position: relative;
      text-align: center;
      padding: clamp(60px, 10vw, 120px) 20px;
      overflow: hidden;
      border-radius: 24px;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
      backdrop-filter: blur(15px);
      margin: 40px 0;
      transition: all 0.4s ease;
    }
    
    .hero:hover {
      box-shadow: var(--glass-shadow-hover);
      transform: translateY(-2px);
    }
    
    /* Advanced mouse tracking effect */
    .hero::before {
      content: "";
      position: absolute;
      top: -100%;
      left: -100%;
      right: -100%;
      bottom: -100%;
      background: radial-gradient(
        circle at var(--mouseX, 50%) var(--mouseY, 50%), 
        rgba(251,191,36,0.15) 0%, 
        rgba(251,191,36,0.08) 30%, 
        transparent 70%
      );
      animation: pulse-hero 8s ease-in-out infinite;
      z-index: -1;
      transition: opacity 0.3s ease;
    }
    
    @keyframes pulse-hero {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
    
    .hero-badge {
      display: inline-block;
      padding: 12px 24px;
      border-radius: 30px;
      font-weight: 700;
      font-size: clamp(14px, 3vw, 16px);
      color: var(--color-accent);
      background: rgba(251,191,36,0.15);
      border: 1px solid rgba(251,191,36,0.3);
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
      animation: badge-float 3s ease-in-out infinite;
    }
    
    @keyframes badge-float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-3px); }
    }
    
    .hero h1 {
      font-size: clamp(2.5rem, 8vw, 5rem);
      font-weight: 900;
      background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-dark) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
      line-height: 1.1;
      text-shadow: 0 0 40px rgba(251,191,36,0.3);
    }
    
    .hero-subtitle {
      font-size: clamp(1.2rem, 4vw, 2rem);
      margin-bottom: 20px;
      color: var(--color-muted);
    }
    
    .hero-description {
      font-size: clamp(16px, 3vw, 18px);
      color: var(--color-muted);
      max-width: 640px;
      margin: 0 auto 40px;
      line-height: 1.7;
    }
    
    .social-proof {
      display: flex;
      justify-content: center;
      gap: clamp(15px, 5vw, 30px);
      margin-bottom: 40px;
      flex-wrap: wrap;
    }
    
    .social-proof-item {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--color-muted);
      padding: 8px 16px;
      background: rgba(255,255,255,0.05);
      border-radius: 15px;
      backdrop-filter: blur(5px);
      transition: transform 0.3s ease;
    }
    
    .social-proof-item:hover {
      transform: scale(1.05);
    }
    
    .social-proof-item .star {
      color: var(--color-accent);
      font-size: 20px;
      animation: twinkle 2s ease-in-out infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    /* Enhanced price box */
    .price-box {
      background: rgba(239,68,68,0.15);
      border: 1px solid rgba(239,68,68,0.4);
      border-radius: 24px;
      padding: clamp(20px, 5vw, 30px);
      max-width: 420px;
      margin: 0 auto 40px;
      backdrop-filter: blur(15px);
      box-shadow: 0 15px 35px rgba(239,68,68,0.2);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }
    
    .price-box::before {
      content: "";
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, transparent, rgba(239,68,68,0.5), transparent);
      border-radius: 24px;
      z-index: -1;
      animation: border-glow 3s linear infinite;
    }
    
    @keyframes border-glow {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .price-box:hover {
      transform: translateY(-6px);
      box-shadow: 0 25px 50px rgba(239,68,68,0.3);
    }
    
    .price-label {
      color: var(--color-highlight);
      font-weight: 600;
      margin-bottom: 15px;
      font-size: clamp(14px, 3vw, 16px);
    }
    
    .price {
      font-size: clamp(1.8rem, 6vw, 2.4rem);
      font-weight: 900;
      display: flex;
      justify-content: center;
      align-items: baseline;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .price-old {
      text-decoration: line-through;
      color: var(--color-muted);
      font-size: clamp(1rem, 4vw, 1.3rem);
    }
    
    .price-new {
      color: var(--color-accent);
      animation: price-pulse 2s ease-in-out infinite;
    }
    
    @keyframes price-pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .price-urgency {
      font-size: clamp(12px, 2.5vw, 14px);
      color: var(--color-highlight);
      margin-top: 10px;
      text-align: center;
      animation: urgency-blink 1.5s ease-in-out infinite;
    }
    
    @keyframes urgency-blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    /* Enhanced buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: clamp(14px, 3vw, 18px) clamp(25px, 6vw, 35px);
      background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dark));
      color: #000;
      text-decoration: none;
      border-radius: 15px;
      font-weight: 700;
      font-size: clamp(16px, 3vw, 18px);
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 25px rgba(251,191,36,0.4);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 35px rgba(251,191,36,0.6);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
      box-shadow: 0 10px 25px rgba(251,191,36,0.2);
    }
    
    .loading {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid #000;
      border-top: 3px solid transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Enhanced sections */
    .features, .benefits, .cta {
      padding: clamp(60px, 10vw, 100px) 0;
      position: relative;
    }
    
    .features {
      background: 
        radial-gradient(800px 400px at 100% 0%, rgba(251,191,36,0.08), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
    }
    
    .benefits {
      background: 
        radial-gradient(600px 300px at 0% 50%, rgba(251,191,36,0.08), transparent 70%),
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
    }
    
    .section-title {
      text-align: center;
      font-size: clamp(2rem, 6vw, 2.8rem);
      font-weight: bold;
      margin-bottom: 20px;
      line-height: 1.2;
    }
    
    .section-subtitle {
      text-align: center;
      color: var(--color-muted);
      max-width: 640px;
      margin: 0 auto 60px;
      font-size: clamp(16px, 3vw, 18px);
      line-height: 1.6;
    }
    
    .features-grid, .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
    }
    
    .feature-card {
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: clamp(24px, 5vw, 32px);
      transition: all 0.4s ease;
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    
    .feature-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--color-accent), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }
    
    .feature-card:hover::before {
      transform: translateX(100%);
    }
    
    .feature-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
    }
    
    .feature-icon {
      width: 60px;
      height: 60px;
      background: rgba(251,191,36,0.2);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      font-size: 28px;
      color: var(--color-accent);
      transition: transform 0.3s ease;
    }
    
    .feature-card:hover .feature-icon {
      transform: scale(1.1) rotate(5deg);
    }
    
    .feature-title {
      font-size: clamp(18px, 4vw, 20px);
      font-weight: 700;
      margin-bottom: 12px;
    }
    
    .feature-description {
      color: var(--color-muted);
      line-height: 1.6;
    }
    
    .benefit-item {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .benefit-icon {
      color: #10b981;
      font-size: 24px;
      margin-top: 5px;
    }
    
    .benefit-content h3 {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: clamp(16px, 3vw, 18px);
    }
    
    .benefit-content p {
      color: var(--color-muted);
      line-height: 1.6;
    }
    
    /* Enhanced CTA section */
    .cta {
      text-align: center;
    }
    
    .cta-box {
      background: linear-gradient(135deg, rgba(251,191,36,0.12) 0%, rgba(245,158,11,0.12) 100%);
      border: 1px solid rgba(251,191,36,0.3);
      border-radius: 24px;
      padding: clamp(30px, 6vw, 40px);
      margin: 40px auto;
      max-width: 640px;
      backdrop-filter: blur(10px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.3);
      transition: all 0.4s ease;
    }
    
    .cta-box:hover {
      transform: translateY(-4px);
      box-shadow: 0 25px 50px rgba(0,0,0,0.4);
    }
    
    .cta-title {
      color: var(--color-accent);
      font-weight: 700;
      margin-bottom: 20px;
      font-size: clamp(18px, 4vw, 20px);
    }
    
    .cta-list {
      list-style: none;
      text-align: left;
      margin: 0 auto 30px;
      max-width: 520px;
    }
    
    .cta-list li {
      padding: 8px 0;
      color: #d1d5db;
      font-size: clamp(14px, 3vw, 16px);
      line-height: 1.5;
    }
    
    /* Footer */
    .footer {
      border-top: 1px solid rgba(71,85,105,0.5);
      padding: clamp(30px, 6vw, 40px) 0;
      text-align: center;
      background: rgba(0,0,0,0.2);
      backdrop-filter: blur(5px);
    }
    
    .footer-logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      font-size: clamp(20px, 4vw, 24px);
      font-weight: bold;
      color: var(--color-accent);
    }
    
    .footer-text {
      color: var(--color-muted);
      font-size: clamp(14px, 3vw, 16px);
    }
    
    /* Enhanced mobile responsiveness */
    @media (max-width: 768px) {
      .header {
        padding: 15px 0;
      }
      
      .header-content {
        flex-direction: column;
        gap: 15px;
      }
      
      .hero {
        margin: 20px 0;
        padding: 40px 15px;
        border-radius: 20px;
      }
      
      .social-proof {
        flex-direction: column;
        gap: 15px;
        align-items: center;
      }
      
      .features-grid, .benefits-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .price {
        flex-direction: column;
        gap: 5px;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
      }
    }
    
    @media (max-width: 480px) {
      .container {
        padding: 0 15px;
      }
      
      .hero {
        padding: 30px 15px;
      }
      
      .feature-card {
        padding: 20px;
      }
      
      .cta-box {
        padding: 25px 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <span>♔</span>
          <span>SCACCHI MENTALI</span>
        </div>
        <div class="badge">Offerta Limitata</div>
      </div>
    </div>
  </header>

  <!-- Hero Section -->
  <section class="hero" id="hero-section">
    <div class="container">
      <div class="hero-badge">
        🔥 Prodotto Digitale Esclusivo
      </div>
      <h1>Scacchiera del Tempo</h1>
      <p class="hero-subtitle">
        La Tua Strategia per una <span style="color: var(--color-accent); font-weight: bold;">Vita da Dio</span>
      </p>
      <p class="hero-description">
        Trasforma ogni giornata in una mossa vincente. Il sistema di gestione del tempo
        che combina la strategia degli scacchi con la crescita personale.
      </p>
      <div class="social-proof">
        <div class="social-proof-item">
          <span class="star">★</span>
          <span style="font-weight: 600;">4.9/5</span>
          <span style="color: var(--color-muted);">(2.021 utenti)</span>
        </div>
        <div class="social-proof-item" style="color: #10b981;">
          <span>👥</span>
          <span>Oltre 2.000 persone hanno già iniziato</span>
        </div>
      </div>
      <div class="price-box">
        <p class="price-label">⏰ Offerta Early Adopters</p>
        <p class="price">
          <span class="price-old">19,99€</span>
          <span class="price-new">9,99€</span>
        </p>
        <p class="price-urgency">Scade tra pochi giorni!</p>
      </div>
      <button id="checkout-button" class="btn">
        <span class="loading" id="loading"></span>
        <span id="button-text">
          <span>🏆</span>
          <span>Ottieni la Tua Scacchiera del Tempo</span>
          <span>→</span>
        </span>
      </button>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features">
    <div class="container">
      <h2 class="section-title">
        Cosa Include la <span style="color: var(--color-accent);">Scacchiera del Tempo</span>
      </h2>
      <p class="section-subtitle">
        Un sistema completo per trasformare la tua gestione del tempo in una strategia vincente
      </p>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">🎯</div>
          <h3 class="feature-title">Sistema "Vita da Dio"</h3>
          <p class="feature-description">
            Pianifica i tuoi obiettivi più importanti con la strategia del Re.
          </p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">📅</div>
          <h3 class="feature-title">Calendario 12 Mesi</h3>
          <p class="feature-description">
            Visione strategica a lungo termine per i tuoi progetti.
          </p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">✅</div>
          <h3 class="feature-title">Lista Strategica</h3>
          <p class="feature-description">
            Organizza le tue azioni quotidiane come mosse vincenti.
          </p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">♔</div>
          <h3 class="feature-title">Sezioni C1-C12</h3>
          <p class="feature-description">
            12 aree di focus per una crescita completa e bilanciata.
          </p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">♕</div>
          <h3 class="feature-title">Moduli H1-H12</h3>
          <p class="feature-description">
            Strategie avanzate per massimizzare la tua produttività.
          </p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">📊</div>
          <h3 class="feature-title">File Excel Pronto</h3>
          <p class="feature-description">
            Scarica e inizia subito, compatibile con Excel e Google Sheets.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Benefits Section -->
  <section class="benefits">
    <div class="container">
      <h2 class="section-title">
        Perché Scegliere la <span style="color: var(--color-accent);">Scacchiera del Tempo</span>
      </h2>
      <div class="benefits-grid">
        <div>
          <div class="benefit-item">
            <div class="benefit-icon">✓</div>
            <div class="benefit-content">
              <h3>Strategia Comprovata</h3>
              <p>Basata sui principi strategici degli scacchi applicati alla vita reale.</p>
            </div>
          </div>
          <div class="benefit-item">
            <div class="benefit-icon">✓</div>
            <div class="benefit-content">
              <h3>Facile da Usare</h3>
              <p>Interfaccia intuitiva che puoi personalizzare secondo le tue esigenze.</p>
            </div>
          </div>
          <div class="benefit-item">
            <div class="benefit-icon">✓</div>
            <div class="benefit-content">
              <h3>Risultati Immediati</h3>
              <p>Inizia a vedere miglioramenti nella tua produttività dal primo giorno.</p>
            </div>
          </div>
        </div>
        <div>
          <div class="benefit-item">
            <div class="benefit-icon">✓</div>
            <div class="benefit-content">
              <h3>Supporto Completo</h3>
              <p>Accesso alla community Scacchi Mentali e aggiornamenti gratuiti.</p>
            </div>
          </div>
          <div class="benefit-item">
            <div class="benefit-icon">✓</div>
            <div class="benefit-content">
              <h3>Garanzia 30 Giorni</h3>
              <p>Se non sei soddisfatto, rimborso completo senza domande.</p>
            </div>
          </div>
          <div class="benefit-item">
            <div class="benefit-icon">✓</div>
            <div class="benefit-content">
              <h3>Aggiornamenti Gratuiti</h3>
              <p>Ricevi tutte le future versioni e miglioramenti senza costi aggiuntivi.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta">
    <div class="container">
      <h2 class="section-title">
        Pronto a Fare la Tua <span style="color: var(--color-accent);">Mossa Vincente</span>?
      </h2>
      <p style="font-size:18px;color:var(--color-muted);margin-bottom:40px;">
        Unisciti a oltre 2.000 persone che hanno già trasformato la loro gestione del tempo
        in una strategia vincente con la Scacchiera del Tempo.
      </p>
      <div class="cta-box">
        <p class="cta-title">🎯 Cosa Otterrai Subito:</p>
        <ul class="cta-list">
          <li>✅ File Excel della Scacchiera del Tempo (download immediato)</li>
          <li>✅ Guida completa all'utilizzo (PDF)</li>
          <li>✅ Accesso alla community privata Scacchi Mentali</li>
          <li>✅ Bonus: Template per obiettivi mensili</li>
        </ul>
      </div>
      <button id="checkout-button-2" class="btn" style="font-size:20px;padding:20px 40px;margin-top:20px;">
        <span class="loading" id="loading-2"></span>
        <span id="button-text-2">
          <span>🏆</span>
          <span>Acquista Ora - Solo 9,99€</span>
          <span>→</span>
        </span>
      </button>
      <p style="font-size:14px;color:#6b7280;margin-top:20px;">
        Pagamento sicuro tramite Stripe • Garanzia 30 giorni • Download immediato
      </p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-logo">
        <span>♔</span>
        <span>SCACCHI MENTALI</span>
      </div>
      <p class="footer-text">
        © 2025 Scacchi Mentali. Tutti i diritti riservati.
      </p>
    </div>
  </footer>

  <script>
    // Inizializza Stripe con la chiave pubblica
    const stripe = Stripe('pk_live_51RyvikCPGerjPt82LPcFpAgr3grN1xcuV9mjwuhpsdYnLJsUoeetYlJqeu8EzA2hrgUFc2wK6LfYwdOsoUPjpqSG00ac6dzhlj');

    // Associa i pulsanti alla stessa funzione
    document.getElementById('checkout-button').addEventListener('click', handleCheckout);
    document.getElementById('checkout-button-2').addEventListener('click', handleCheckout);

    // Calcola i percorsi di successo e annullo
    function getReturnUrls() {
      const baseUrl = "https://antoca84.github.io/chess-whispers-arcane/scacchiera-tempo/";
      return {
        successUrl: baseUrl + "success.html",
        cancelUrl: baseUrl + "cancel.html"
      };
    }

    async function handleCheckout() {
      showLoading();
      try {
        const { successUrl, cancelUrl } = getReturnUrls();
        
        // Creazione sessione Stripe con configurazione corretta
        const { error } = await stripe.redirectToCheckout({
          lineItems: [{ 
            price: 'price_1RyxqqCPGerjPt821oCxVcmk', 
            quantity: 1 
          }],
          mode: 'payment',
          successUrl: successUrl,
          cancelUrl: cancelUrl,
          allowPromotionCodes: true,
          billingAddressCollection: 'auto',
          shippingAddressCollection: {
            allowedCountries: ['IT', 'US', 'GB', 'DE', 'FR', 'ES']
          }
        });
        
        if (error) {
          console.error('Errore Stripe:', error);
          showError('Errore durante il pagamento: ' + error.message);
        }
      } catch (err) {
        console.error('Errore:', err);
        showError('Errore di connessione. Verifica la tua connessione internet e riprova.');
      } finally {
        hideLoading();
      }
    }

    function showError(message) {
      const errorDiv = document.createElement('div');
      errorDiv.style.cssText = `
        position: fixed; top: 20px; right: 20px; z-index: 1000;
        background: rgba(239, 68, 68, 0.9); color: white; padding: 16px 20px;
        border-radius: 8px; font-weight: 600; max-width: 400px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.3); backdrop-filter: blur(10px);
      `;
      errorDiv.textContent = message;
      document.body.appendChild(errorDiv);
      setTimeout(() => errorDiv.remove(), 5000);
    }

    function showLoading() {
      ['checkout-button', 'checkout-button-2'].forEach(id => {
        const btn = document.getElementById(id);
        const loading = btn.querySelector('.loading');
        const text = btn.querySelector('[id^="button-text"]');
        btn.disabled = true;
        loading.style.display = 'block';
        text.style.display = 'none';
      });
    }

    function hideLoading() {
      ['checkout-button', 'checkout-button-2'].forEach(id => {
        const btn = document.getElementById(id);
        const loading = btn.querySelector('.loading');
        const text = btn.querySelector('[id^="button-text"]');
        btn.disabled = false;
        loading.style.display = 'none';
        text.style.display = 'flex';
      });
    }

    // Effetto parallax per la hero: aggiorna i CSS custom properties mouseX/mouseY
    const hero = document.getElementById('hero-section');
    hero.addEventListener('mousemove', e => {
      const rect = hero.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      hero.style.setProperty('--mouseX', (x / rect.width) * 100 + '%');
      hero.style.setProperty('--mouseY', (y / rect.height) * 100 + '%');
    });
    hero.addEventListener('mouseleave', () => {
      hero.style.removeProperty('--mouseX');
      hero.style.removeProperty('--mouseY');
    });

    // Smooth scroll per anchor interne
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>
</body>
</html>
