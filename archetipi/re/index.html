<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Il Re - Messaggio Quotidiano | Scacchi Mentali</title>
  <meta name="description" content="Messaggio quotidiano personalizzato per l'archetipo del Re. Strategia di leadership e saggezza.">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><text y='18' font-size='18'>â™”</text></svg>">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Main Styles -->
  <link rel="stylesheet" href="../../css/style.css">

  <style>
    :root { --archetipo-color: var(--color-re); }

    /* Hero */
    .archetipo-hero {
      background: radial-gradient(circle at center, #2a2215 0%, var(--color-background) 100%);
    }
    .archetipo-icon {
      color: var(--color-re);
      text-shadow: 0 0 20px rgba(255,215,0,0.5);
    }

    /* Messaggio */
    .message-card {
      border-top: 4px solid var(--color-re);
    }
    .action-button.primary {
      background: linear-gradient(135deg, var(--color-re), #FFB000);
    }

    /* Nasconde tutto il contenuto privato finchÃ© non viene autenticato */
    .private-content {
      display: none;
    }

    /* Notice a comparsa */
    .access-notice {
      position: fixed; top: 0; left: 0; right: 0;
      padding: 15px; text-align: center;
      font-weight: bold; font-size: 16px;
      z-index: 10000;
      animation: slideDown 0.4s ease-out;
    }
    .access-notice.private {
      background: linear-gradient(45deg, #FFD700, #FFA500);
      color: #000; border-bottom: 3px solid #FFD700;
    }
    .access-notice.public {
      background: linear-gradient(45deg, #666, #888);
      color: #fff; border-bottom: 3px solid #666;
    }
    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to   { transform: translateY(0);      }
    }

    /* CTA quiz per accesso pubblico */
    .quiz-cta {
      background: linear-gradient(135deg,#1a1a1a,#2a2a2a);
      border: 2px solid #FFD700;
      border-radius: 15px;
      padding: 30px;
      margin: 30px;
      text-align: center;
    }
    .quiz-cta h3 { color: #FFD700; margin-bottom: 15px; }
    .quiz-cta p  { color: #ccc; margin-bottom: 20px; }
    .quiz-cta a  {
      background: linear-gradient(45deg,#FFD700,#FFA500);
      color: #000;
      padding: 15px 30px;
      text-decoration: none;
      border-radius: 25px;
      font-weight: bold;
      font-size: 16px;
    }

    /* Se autenticato, evidenzia bordo */
    body.authenticated {
      border: 3px solid #FFD700;
      box-shadow: 0 0 30px rgba(255,215,0,0.3);
    }
  </style>

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GA_MEASUREMENT_ID');
  </script>

  <!-- Authenticator (solo auth.js!) -->
  <script defer src="/js/auth.js"></script>
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="container">
      <a href="../../index.html"><img src="../../images/logo.png" alt="Scacchi Mentali Logo" class="logo"></a>
      <h1 class="header-title">Scacchi Mentali</h1>
    </div>
  </header>

  <!-- HERO -->
  <section class="archetipo-hero hero">
    <div class="container">
      <div class="hero-content">
        <div class="archetipo-icon" style="font-size:6rem;">â™”</div>
        <h1 class="hero-title">Il Re</h1>
        <p class="archetipo-subtitle">Leader strategico â€¢ Protettore â€¢ Saggio</p>
        <div class="current-date"><span id="current-date">Caricamento...</span></div>
      </div>
    </div>
  </section>

  <!-- MESSAGGIO QUOTIDIANO (privato) -->
  <section class="messaggio-quotidiano private-content">
    <div class="container">
      <div class="message-card">
        <div class="message-header">
          <h2>Il Tuo Messaggio di Oggi</h2>
          <img src="../../images/archetipi/re.png" alt="Il Re" class="archetipo-image">
        </div>
        <div class="message-content">
          <p id="daily-message">
            "Oggi, come un vero Re, ricorda che la tua forza non risiede nel dominare, ma nel proteggereâ€¦
          </p>
        </div>
        <div class="message-actions">
          <button id="share-button" class="action-button primary">ðŸ“¤ Condividi Messaggio</button>
          <button id="save-button"  class="action-button secondary">ðŸ’¾ Salva Messaggio</button>
        </div>
      </div>
    </div>
  </section>

  <!-- SUBSCRIPTION CTA (privato) -->
  <section class="subscription-cta private-content">
    <div class="container">
      <h2>Vuoi ricevere messaggi quotidiani personalizzati?</h2>
      <p>Attiva la tua subscription mensile e non perdere mai un giorno di crescita strategica.</p>
      <a href="../../subscribe/?archetipo=re" class="cta-button">ðŸ‘‘ Attiva Subscription per Il Re</a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Scacchi Mentali. Tutti i diritti riservati.</p>
      <div class="footer-links">
        <a href="../../index.html">Home</a>
        <a href="#privacy">Privacy Policy</a>
        <a href="#termini">Termini di Servizio</a>
      </div>
    </div>
  </footer>

  <!-- Inline: aggiorna data corrente e avvia auth.js -->
  <script>
    // Mostra data in italiano
    document.getElementById('current-date').textContent =
      new Date().toLocaleDateString('it-IT', {
        weekday:'long', year:'numeric', month:'long', day:'numeric'
      });

    // L'autenticazione parte automaticamente grazie a auth.js
    // auth.js nasconde `.private-content` e poi:
    // - se token valido â†’ aggiunge class="authenticated" e mostra private-content
    // - se token errato â†’ redirige a /accesso-negato.html
    // - se nessun token â†’ mostra call-to-action per il quiz
  </script>
</body>
</html>
